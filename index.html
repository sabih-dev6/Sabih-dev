<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        :root { --gold: #ffcc00; --bg: #050505; --glass: rgba(255, 255, 255, 0.05); }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Orbitron', sans-serif; overflow: hidden; touch-action: none; }
        
        /* Premium Scanline Effect */
        #scanlines {
            position: absolute; inset: 0; z-index: 100; pointer-events: none;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.3) 51%);
            background-size: 100% 4px;
        }

        #overlay, #settings-screen { 
            position: absolute; inset: 0; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; background: var(--bg); z-index: 50; 
        }

        .sabih-brand { font-size: 10px; letter-spacing: 10px; color: var(--gold); margin-bottom: 5px; opacity: 0.7; }
        h1 { font-size: 3rem; margin: 0; font-weight: 900; color: #fff; text-shadow: 0 0 20px var(--gold); }
        
        .level-tag { font-size: 12px; color: var(--gold); border: 1px solid var(--gold); padding: 2px 10px; margin-top: 10px; border-radius: 3px; }

        .btn { 
            padding: 15px 40px; background: transparent; color: #fff; 
            border: 1px solid #444; font-weight: bold; margin: 10px;
            cursor: pointer; transition: 0.3s; width: 220px;
        }
        .btn:active { border-color: var(--gold); color: var(--gold); box-shadow: 0 0 15px var(--gold); }

        #hud { 
            position: absolute; top: 0; width: 100%; padding: 20px; 
            display: flex; justify-content: space-between; box-sizing: border-box;
            z-index: 5; font-size: 14px; color: var(--gold); display: none;
        }

        .hidden { display: none !important; }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="scanlines"></div>

    <div id="overlay">
        <div class="sabih-brand">SABIH CREATION</div>
        <h1>INTERCEPTOR</h1>
        <div class="level-tag">ELITE EDITION</div>
        <button class="btn" style="margin-top: 40px;" onclick="startGame()">INITIATE MISSION</button>
        <button class="btn" onclick="toggleSettings()">CALIBRATION</button>
    </div>

    <div id="settings-screen" class="hidden">
        <div class="sabih-brand">SETTINGS</div>
        <button class="btn" onclick="toggleFX()">TOGGLE SCANLINES</button>
        <button class="btn" onclick="difficulty = 1.5">MODE: EXTREME</button>
        <button class="btn" onclick="toggleSettings()">BACK TO BRIDGE</button>
    </div>

    <div id="hud">
        <div id="lvl-ui">SECTOR: 1</div>
        <div id="score-ui">DATA: 0</div>
    </div>

    <canvas id="g"></canvas>

<script>
    const canvas = document.getElementById("g");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let score = 0, level = 1, active = false, difficulty = 1;
    let player = { x: canvas.width/2, y: canvas.height-120 };
    let bullets = [], enemies = [];
    
    // Audio Engine
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playSound(f, t, d, v=0.05) {
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = t; o.frequency.setValueAtTime(f, audioCtx.currentTime);
        g.gain.setValueAtTime(v, audioCtx.currentTime);
        o.connect(g); g.connect(audioCtx.destination);
        o.start(); o.stop(audioCtx.currentTime + d);
    }

    function toggleSettings() {
        document.getElementById("settings-screen").classList.toggle("hidden");
        document.getElementById("overlay").classList.toggle("hidden");
    }

    function toggleFX() {
        const s = document.getElementById("scanlines");
        s.style.display = s.style.display === "none" ? "block" : "none";
    }

    function startGame() {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        document.getElementById("overlay").classList.add("hidden");
        document.getElementById("hud").style.display = "flex";
        active = true;
        spawnEnemy();
        loop();
    }

    window.addEventListener("touchmove", (e) => {
        player.x = e.touches[0].clientX;
        player.y = e.touches[0].clientY - 50;
    });

    setInterval(() => { 
        if(active) {
            bullets.push({x: player.x, y: player.y});
            playSound(600, 'sine', 0.05);
        }
    }, 150);

    function spawnEnemy() {
        if(!active) return;
        enemies.push({ 
            x: Math.random()*canvas.width, 
            y: -50, 
            s: (4 + level) * difficulty,
            color: level % 2 === 0 ? "#fff" : "#ffcc00"
        });
        setTimeout(spawnEnemy, Math.max(200, 1000 - (score*5))); 
    }

    function loop() {
        if(!active) return;
        ctx.fillStyle = "rgba(5, 5, 5, 0.2)";
        ctx.fillRect(0,0,canvas.width, canvas.height);

        // Sector Leveling Logic
        if(score > level * 15) {
            level++;
            document.getElementById("lvl-ui").innerText = "SECTOR: " + level;
            playSound(200, 'sawtooth', 0.5, 0.2); // Level up sound
        }

        // Player Ship (Gold Trim)
        ctx.shadowBlur = 20; ctx.shadowColor = "#ffcc00";
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.moveTo(player.x, player.y - 30);
        ctx.lineTo(player.x - 20, player.y + 10);
        ctx.lineTo(player.x + 20, player.y + 10);
        ctx.fill();

        // Bullets
        bullets.forEach((b, i) => {
            b.y -= 20;
            ctx.fillStyle = "#ffcc00";
            ctx.fillRect(b.x-1, b.y, 2, 20);
            if(b.y < 0) bullets.splice(i, 1);
        });

        // Enemies
        enemies.forEach((e, ei) => {
            e.y += e.s;
            ctx.shadowBlur = 10; ctx.shadowColor = e.color;
            ctx.fillStyle = e.color;
            ctx.fillRect(e.x-15, e.y, 30, 2);

            bullets.forEach((b, bi) => {
                if(Math.hypot(e.x - b.x, e.y - b.y) < 25) {
                    enemies.splice(ei, 1);
                    bullets.splice(bi, 1);
                    score++;
                    document.getElementById("score-ui").innerText = "DATA: " + score;
                    playSound(50, 'square', 0.1);
                }
            });

            if(e.y > canvas.height || Math.hypot(e.x - player.x, e.y - player.y) < 30) {
                location.reload();
            }
        });

        requestAnimationFrame(loop);
    }
</script>
</body>
</html>
